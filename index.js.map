{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["`use strict`;\n\nimport axios from 'axios';\n\nconst API_KEY = '46858966-ba511c0c272bf1bf47f1d2839';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","`use strict`;\n\nexport function renderImages(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes = 0,\n        views = 0,\n        comments = '',\n        downloads = 0,\n      }) => {\n        return `\n      <div class=\"galleries\">\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                <div class=\"content\">\n                    <div><p>Likes</p><span>${likes}</span></div>\n                    <div><p>Views</p><span>${views}</span></div>\n                    <div><p>Comments</p><span>${comments}</span></div>\n                    <div><p>Downloads</p><span>${downloads}</span></div>\n                </div>\n            </div>\n    `;\n      }\n    )\n    .join('');\n}\nexport function setupImageLoadHandlers(container) {\n  const images = container.querySelectorAll('.galleries img');\n  images.forEach(img => {\n    const loader = img.parentElement.previousElementSibling;\n\n    img.onload = () => {\n      if (loader) {\n        loader.style.display = 'none';\n      }\n    };\n\n    img.onerror = () => {\n      if (loader) {\n        loader.style.display = 'none';\n      }\n    };\n  });\n}\n","'use strict';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages, setupImageLoadHandlers } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst container = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet lightbox = null;\nlet page = 1;\nlet totalLoaded = 0;\nlet totalHits = 0;\n\nform.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  const { textRow } = event.target.elements;\n  const searchQuery = textRow.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'The search field cannot be empty.',\n      color: 'red',\n    });\n    return;\n  }\n\n  query = searchQuery;\n  page = 1;\n  totalLoaded = 0;\n  container.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages(query, page);\n\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'Caution',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'yellow',\n      });\n    } else {\n      totalHits = data.totalHits;\n      totalLoaded = data.hits.length;\n      container.innerHTML = renderImages(data.hits);\n      setupImageLoadHandlers(container);\n\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery .galleries a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n\n      toggleLoadMoreButton();\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    console.error('Error during image fetching:', error);\n  }\n\n  form.reset();\n}\n\nasync function handleLoadMore() {\n  page++;\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages(query, page);\n\n    loader.style.display = 'none';\n    totalLoaded += data.hits.length;\n    container.insertAdjacentHTML('beforeend', renderImages(data.hits));\n    setupImageLoadHandlers(container);\n\n    if (lightbox) {\n      lightbox.refresh();\n    }\n\n    toggleLoadMoreButton();\n    scrollPage();\n  } catch (error) {\n    loader.style.display = 'none';\n    console.error('Помилка при завантаженні додаткових зображень:', error);\n  }\n}\n\nfunction toggleLoadMoreButton() {\n  if (totalLoaded >= totalHits || totalHits < 15) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.info({\n      title: 'Інформація',\n      message: 'Were sorry, but youve reached the end of search results.',\n    });\n  } else {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\nfunction scrollPage() {\n  const firstCard = container.querySelector('.galleries');\n  if (firstCard) {\n    const { height } = firstCard.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","error","renderImages","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","setupImageLoadHandlers","container","img","loader","form","loadMoreBtn","lightbox","totalLoaded","totalHits","handleSearch","handleLoadMore","event","textRow","searchQuery","iziToast","data","SimpleLightbox","toggleLoadMoreButton","scrollPage","firstCard","height"],"mappings":"owBAIA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,CAAG,EACD,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIL,EAAU,CAAE,OAAAI,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCtBO,SAASC,EAAaC,EAAO,CAClC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EAAQ,EACR,MAAAC,EAAQ,EACR,SAAAC,EAAW,GACX,UAAAC,EAAY,CACpB,IACe;AAAA;AAAA,2BAEYL,CAAa;AAAA,gCACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,6CAGbC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA;AAAA;AAAA,KAKrD,EACA,KAAK,EAAE,CACZ,CACO,SAASC,EAAuBC,EAAW,CACjCA,EAAU,iBAAiB,gBAAgB,EACnD,QAAQC,GAAO,CACpB,MAAMC,EAASD,EAAI,cAAc,uBAEjCA,EAAI,OAAS,IAAM,CACbC,IACFA,EAAO,MAAM,QAAU,OAE/B,EAEID,EAAI,QAAU,IAAM,CACdC,IACFA,EAAO,MAAM,QAAU,OAE/B,CACA,CAAG,CACH,CCxCA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCH,EAAY,SAAS,cAAc,UAAU,EAC7CI,EAAc,SAAS,cAAc,YAAY,EACjDF,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIjB,EAAQ,GACRoB,EAAW,KACXnB,EAAO,EACPoB,EAAc,EACdC,EAAY,EAEhBJ,EAAK,iBAAiB,SAAUK,CAAY,EAC5CJ,EAAY,iBAAiB,QAASK,CAAc,EAEpD,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpB,KAAM,CAAE,QAAAC,CAAS,EAAGD,EAAM,OAAO,SAC3BE,EAAcD,EAAQ,MAAM,KAAI,EAEtC,GAAIC,IAAgB,GAAI,CACtBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oCACT,MAAO,KACb,CAAK,EACD,MACD,CAED5B,EAAQ2B,EACR1B,EAAO,EACPoB,EAAc,EACdN,EAAU,UAAY,GACtBI,EAAY,MAAM,QAAU,OAC5BF,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMY,EAAO,MAAM9B,EAAYC,EAAOC,CAAI,EAE1CgB,EAAO,MAAM,QAAU,OAEnBY,EAAK,KAAK,SAAW,EACvBD,EAAS,QAAQ,CACf,MAAO,UACP,QACE,2EACF,MAAO,QACf,CAAO,GAEDN,EAAYO,EAAK,UACjBR,EAAcQ,EAAK,KAAK,OACxBd,EAAU,UAAYV,EAAawB,EAAK,IAAI,EAC5Cf,EAAuBC,CAAS,EAE3BK,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIU,EAAe,wBAAyB,CACrD,aAAc,MACd,aAAc,GACxB,CAAS,EAKHC,IAEH,OAAQ3B,EAAO,CACda,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAM,+BAAgCb,CAAK,CACpD,CAEDc,EAAK,MAAK,CACZ,CAEA,eAAeM,GAAiB,CAC9BvB,IACAgB,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMY,EAAO,MAAM9B,EAAYC,EAAOC,CAAI,EAE1CgB,EAAO,MAAM,QAAU,OACvBI,GAAeQ,EAAK,KAAK,OACzBd,EAAU,mBAAmB,YAAaV,EAAawB,EAAK,IAAI,CAAC,EACjEf,EAAuBC,CAAS,EAE5BK,GACFA,EAAS,QAAO,EAGlBW,IACAC,GACD,OAAQ5B,EAAO,CACda,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAM,iDAAkDb,CAAK,CACtE,CACH,CAEA,SAAS2B,GAAuB,CAC1BV,GAAeC,GAAaA,EAAY,IAC1CH,EAAY,MAAM,QAAU,OAC5BS,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,0DACf,CAAK,GAEDT,EAAY,MAAM,QAAU,OAEhC,CAEA,SAASa,GAAa,CACpB,MAAMC,EAAYlB,EAAU,cAAc,YAAY,EACtD,GAAIkB,EAAW,CACb,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAU,sBAAqB,EAClD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QAChB,CAAK,CACF,CACH"}